<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

<body>
<div>
    <form action="">
        <table>
            <tr>
                <td>
                    Chat Log<br/>
                    <textarea readonly="true" rows="6" cols="50" id="chatlog"></textarea>
                </td>
                <td>
                    Users<br/>
                    <textarea readonly="true" rows="6" cols="20" id="users"></textarea>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input id="roomNumber" name="room" value="1" type="text"/>
                    <input id="textField" name="name" value="Duke" type="text"/>
                    <input onclick="join();" value="Join" type="button"/>
                    <input onclick="send_message();" value="Send" type="button"/><p/>
                    <input onclick="disconnect();" value="Disconnect" type="button"/>
                </td>
            </tr>
        </table>
        <h:form>
            <h:dataTable id="user" value="#{userController.users}" var="user">
                <h:column>
                    ${user.name}
                </h:column>
            </h:dataTable>
            <h:commandButton id="loadData" value="load data in db" action="#{userController.loadData()}"></h:commandButton>
            <h:commandButton id="getData" value="fetchDbData" action="#{userController.getUsers()}"></h:commandButton>
            <h:commandButton id="persistLogs" value="load data in db" action="#{userController.persistLogsNow()}"></h:commandButton>
        </h:form>
    </form>
    <div id="output"></div>
    <script language="javascript" type="text/javascript" src="${facesContext.externalContext.requestContextPath}/chat/websocket.js"></script>
</div>


</body>
</html>
